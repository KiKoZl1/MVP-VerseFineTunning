---
id: 3
title: 3. Formatting & Structure for Verse — Files, Blocks, and Readability
tags: [verse, formatting, style, structure, comments]
summary: A lightweight formatting guide for consistent Verse code: file structure, indentation, line breaks, and comment placement.
---

# Formatting & Structure

This page defines a minimal, consistent formatting standard for Verse code in this project to improve readability and training quality.

---

## 1) File Layout

1. **Imports** at the top:
   ```verse
   using { /Verse.org, /Verse.org/Simulation, /Fortnite.com/Playspace, /Fortnite.com/Characters }
   ```
2. **File-level constants & configuration** (document intent with comments).
3. **Public helpers** (reusable functions), then **private helpers** (if you separate logically).
4. **Entry points** (e.g., `OnBegin<override>()`) near the bottom or in a dedicated section.
5. Keep each file focused on **one topic** (this project’s rule).

---

## 2) Indentation & Line Length

- Use **consistent indentation** (spaces). Aim for **4 spaces**.
- Keep lines reasonably short (~100–120 chars). Break long expressions across lines at **logical boundaries**.
- One statement per line; avoid dense one-liners when clarity suffers.

---

## 3) Spacing & Operators

- Surround binary operators with spaces: `A + B`, `X < Y`, `SetHealth(HP - Delta)`.
- No trailing whitespace. Keep a single blank line between logical sections.
- Align short variable initializations for quick scanning (optional, not required).

---

## 4) Comments Placement

- Use `#` for line comments, `<# ... #>` for inline/multiline.
- Prefer comments **above** the code they describe; inline when clarifying a specific token.
- Explain **why**; avoid restating the code.
- Keep TODOs actionable: `# TODO(kiko): Clamp Heal to MaxHealth`.

---

## 5) Function Structure

- **Signature** on its own line, body indented:
  ```verse
  HurtPlayer(DamageAmount : float) : void =
      Playspace := GetPlayspace()
      Players   := Playspace.GetPlayers()
      if (P : player = Players[0]):
          if (Char : fort_character = P.GetFortCharacter[]):
              Char.Damage(DamageAmount)
  ```
- Keep functions **small and single-purpose**.
- Order helpers **top-to-bottom** so callees appear **above** callers when practical.

---

## 6) Failure Contexts Readability

- Put **checks first**, **effects last** in an `if` block.
- Nest `if` blocks to narrow values step-by-step (player → character → action).
- Prefer explicit `else` paths when it clarifies flow.

---

## 7) Example — Before/After

**Before**
```verse
OnBegin<override>() : void = Playspace := GetPlayspace(); Players := Playspace.GetPlayers(); if (P : player = Players[0]): if (C : fort_character = P.GetFortCharacter[]): C.Damage(50.0) # hurts
```

**After**
```verse
OnBegin<override>() : void =
    Playspace := GetPlayspace()
    Players   := Playspace.GetPlayers()

    if (P : player = Players[0]):
        if (Char : fort_character = P.GetFortCharacter[]):
            Char.Damage(50.0)
```

---

## 8) Finetuning Notes (LLM)

- Prefer **expanded** layout over compressed one-liners.
- Keep comment-to-code ratio healthy but not excessive.
- Use consistent imports and ordering to teach stable patterns.
