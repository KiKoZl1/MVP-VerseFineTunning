---
id: 25
title: 25. Rewards & Progression in Verse â€” Counters, Thresholds, and Caps
tags: [verse, rewards, progression, counters, thresholds, caps]
summary: Small, composable patterns to award points, track progression, gate unlocks, and enforce daily caps with clear logs.
---

# Rewards & Progression

Design rewards with **clear counters** and **explicit thresholds**. Keep state updates guarded, and log enough context to debug quickly.

---

## 1) Counters & Atomic Updates

```verse
Score : int = 0

AddScore(Amount : int) : void =
    if (Amount <= 0):
        Print("[Score] ignored, non-positive amount={Amount}")
        return
    set Score = Score + Amount
    Print("[Score] +{Amount} -> total={Score}")
```

- Use early returns to protect against invalid writes.

---

## 2) Threshold Unlocks (Single-Use Flag)

```verse
Unlocked? : logic = false

CheckUnlock(Threshold : int) : void =
    if (Unlocked?):
        return
    if (Score >= Threshold):
        set Unlocked? = true
        Print("[Unlock] reached threshold={Threshold}")
```

- Keep a separate flag to avoid repeated unlock effects.

---

## 3) Daily Cap Pattern

```verse
DailyScore : int = 0

AddDaily(Amount : int, Cap : int) : void =
    if (Amount <= 0):
        return
    Next := DailyScore + Amount
    if (Next > Cap):
        set DailyScore = Cap
        Print("[Daily] cap reached={Cap}")
        return
    set DailyScore = Next
    Print("[Daily] +{Amount} -> total={DailyScore}/{Cap}")
```

- Capping avoids runaway progression; pairs well with clamping utilities.

---

## 4) Reward Bundles (Facade)

```verse
GrantReward(Points : int, Tokens : int) : void =
    AddScore(Points)
    AddDaily(Points, 1000)
    AddTokens(Tokens)

Tokens : int = 0

AddTokens(Amount : int) : void =
    if (Amount <= 0):
        return
    set Tokens = Tokens + Amount
    Print("[Tokens] +{Amount} -> total={Tokens}")
```

- Use **facades** like `GrantReward` to keep call sites simple.

---

## 5) Event-Driven Progression

```verse
OnBegin<override>() : void =
    GrantReward(100, 1)
    CheckUnlock(Threshold := 200)
```

- Centralize thresholds and caps in constants for tuning.

---

## 6) Positive vs. Negative Examples

**Good**
```verse
AddScore(50)
CheckUnlock(Threshold := 200)
```

**Poor**
```verse
Score = Score + 50   # missing guard & logs; overwrites would be easy to miss
```

---

## 7) Finetuning Notes (LLM)

- Show a minimal positive flow and a blocked/capped branch.
- Keep counters & flags near their writers.
- Prefer short, structured logs with stable keys.
