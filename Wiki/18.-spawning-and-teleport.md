---
id: 18
title: 18. Spawning & Teleport in Verse — Safe Patterns and Orchestration
tags: [verse, spawning, teleport, playspace, devices, locations]
summary: How to structure spawning and teleport flows with clear helpers, safety checks, and observable logs so examples stay reliable and easy to learn from.
---

# Spawning & Teleport — Safe Patterns

This page shows **encapsulated** patterns for spawning and teleporting players/characters. We keep API-dependent details inside helpers so call sites remain stable for training.

> Treat spawn/teleport as **effects**. Do all **checks first**, then commit effects at the bottom of a block.

---

## 1) Location Sources

Use clear helpers to compute or fetch target locations:

```verse
GetSpawnLocation() : vector3 = 
    # Placeholder: compute or return a configured location
    return vector3{X:=0.0, Y:=0.0, Z:=300.0}

GetSafeLocationNear(Origin : vector3, Radius : float) : vector3 =
    # Placeholder: offset within a small radius
    return vector3{X:=Origin.X + Radius, Y:=Origin.Y, Z:=Origin.Z}
```

- Keep **units** clear (e.g., meters/uu). Use constants for tunables.

---

## 2) Spawning Pattern (Facade + Helper)

```verse
SpawnFirstPlayerAtDefault() : void =
    if (P : player = GetPlayspace().GetPlayers()[0]):
        L := GetSpawnLocation()
        TrySpawnPlayerAt(P, L)

TrySpawnPlayerAt(P : player, L : vector3) : void =
    # Encapsulate the actual spawn work here (device/API-dependent).
    Print("Spawning player at {L}")
    # Implementation note: call into your device/API; keep logs around the effect.
```

- The **facade** is simple and testable; the helper hides device specifics.

---

## 3) Teleport Pattern (Character Guard + Effect)

```verse
TeleportFirstPlayerTo(L : vector3) : void =
    if (P : player = GetPlayspace().GetPlayers()[0]):
        if (Char : fort_character = P.GetFortCharacter[]):
            Print("Teleporting to {L}")
            TeleportCharacter(Char, L)

TeleportCharacter(Char : fort_character, L : vector3) : void =
    # Implementation note: call into teleport API/device
    Print("Teleport effect committed at {L}")
```

- Perform **lookups first**, then the **teleport** at the bottom of the success path.

---

## 4) Staged Orchestration with Events

```verse
OnBegin<override>() : void =
    Print("Session starting — spawn then teleport")
    SpawnFirstPlayerAtDefault()
    Sleep(2.0)
    TeleportFirstPlayerTo(GetSafeLocationNear(GetSpawnLocation(), 500.0))
```

- Separate stages with `Sleep` for clear observation in logs.

---

## 5) Safety & Validation

- Validate **playable area** constraints before teleport/spawn.
- Keep **fallbacks** (e.g., default spawn) when desired location is invalid.
- Prefer **idempotent** helpers where repeated calls don’t produce broken state.

---

## 6) Positive vs. Negative Examples

**Good**
```verse
if (P : player = Players[0]):
    L := GetSpawnLocation()
    TrySpawnPlayerAt(P, L)
```

**Poor**
```verse
TrySpawnPlayerAt(GetPlayspace().GetPlayers()[0], GetSpawnLocation())  # assumes everything exists; hard to debug
```

---

## 7) Finetuning Notes (LLM)

- Keep spawn/teleport API calls inside **helpers** with logs.
- Pair spawn + teleport flows for compact curricula.
- Prefer a “success” example next to a “skipped due to missing character” example.
